<!-- eslint-disable @angular-eslint/template/prefer-control-flow -->
<div class="verify-email-viewport">
  <div class="verify-center">
    <div class="verify-card">
      <!-- Verifying State -->
      <ng-container *ngIf="state() === VerificationState.VERIFYING">
        <i class="pi pi-spin pi-spinner verify-icon" aria-label="Verifying"></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.VERIFYING.TITLE" | translate }}</h1>
        <p class="muted">
          {{ "PAGES.VERIFY_EMAIL.VERIFYING.SUBTITLE" | translate }}
        </p>
      </ng-container>

      <!-- Success State -->
      <ng-container *ngIf="state() === VerificationState.SUCCESS">
        <i
          class="pi pi-check-circle verify-icon success-icon"
          aria-hidden="true"
        ></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.SUCCESS.TITLE" | translate }}</h1>
        <p class="muted">
          {{ "PAGES.VERIFY_EMAIL.SUCCESS.MESSAGE" | translate }}
        </p>
        <p class="redirect-text">
          {{ "PAGES.VERIFY_EMAIL.SUCCESS.REDIRECT" | translate }}
        </p>
      </ng-container>

      <!-- Error State (generic error) -->
      <ng-container *ngIf="state() === VerificationState.ERROR">
        <i
          class="pi pi-exclamation-triangle verify-icon error-icon"
          aria-hidden="true"
        ></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.ERROR.TITLE" | translate }}</h1>
        <p class="error-message">{{ errorMessage() }}</p>

        <app-button
          class="cta"
          [label]="'PAGES.VERIFY_EMAIL.RESEND.BUTTON' | translate"
          (clicked)="resendEmail()"
        ></app-button>

        <a routerLink="/auth/login" class="back-link">
          {{ "COMMON.BUTTONS.LOGIN" | translate }}
        </a>
      </ng-container>

      <!-- Expired State (token expired) -->
      <ng-container *ngIf="state() === VerificationState.EXPIRED">
        <i class="pi pi-clock verify-icon expired-icon" aria-hidden="true"></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.EXPIRED.TITLE" | translate }}</h1>
        <p class="error-message">{{ errorMessage() }}</p>

        <app-button
          class="cta"
          [label]="'PAGES.VERIFY_EMAIL.RESEND.BUTTON' | translate"
          (clicked)="resendEmail()"
        ></app-button>

        <a routerLink="/auth/login" class="back-link">
          {{ "COMMON.BUTTONS.LOGIN" | translate }}
        </a>
      </ng-container>

      <!-- Resending State (API call in progress) -->
      <ng-container *ngIf="state() === VerificationState.RESENDING">
        <i class="pi pi-spin pi-spinner verify-icon" aria-label="Sending"></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.RESEND.SENDING" | translate }}</h1>
        <p class="muted">
          {{ "PAGES.VERIFY_EMAIL.RESEND.SUBTITLE" | translate }}
        </p>
      </ng-container>

      <!-- Resent State (email sent successfully) -->
      <ng-container *ngIf="state() === VerificationState.RESENT">
        <i
          class="pi pi-envelope verify-icon resent-icon"
          aria-hidden="true"
        ></i>
        <h1>{{ "PAGES.VERIFY_EMAIL.RESENT.TITLE" | translate }}</h1>
        <p class="muted">{{ errorMessage() }}</p>

        <app-button
          class="cta"
          [label]="'PAGES.VERIFY_EMAIL.RESEND.SEND_AGAIN' | translate"
          (clicked)="resendEmail()"
        ></app-button>

        <a routerLink="/auth/login" class="back-link">
          {{ "COMMON.BUTTONS.LOGIN" | translate }}
        </a>
      </ng-container>

      <!-- Footer note -->
      <p class="footer-note">
        {{ "PAGES.VERIFY_EMAIL.FOOTER.HELP" | translate }}
      </p>
    </div>
  </div>
</div>
